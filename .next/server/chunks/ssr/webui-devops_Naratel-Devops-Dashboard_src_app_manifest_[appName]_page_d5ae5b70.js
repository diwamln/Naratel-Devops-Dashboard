module.exports=[49994,a=>{"use strict";var b=a.i(79939),c=a.i(5491),d=a.i(80811),e=a.i(36083),f=a.i(12265),g=a.i(9562),h=a.i(94686);let i=(0,h.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var j=a.i(8631),k=a.i(36048),l=a.i(68940),m=a.i(62312);let n=(0,h.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var o=a.i(27583);let p=(0,h.default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),q=(0,h.default)("git-graph",[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M5 9v6",key:"158jrl"}],["circle",{cx:"5",cy:"18",r:"3",key:"104gr9"}],["path",{d:"M12 3v18",key:"108xh3"}],["circle",{cx:"19",cy:"6",r:"3",key:"108a5v"}],["path",{d:"M16 15.7A9 9 0 0 0 19 9",key:"1e3vqb"}]]);var r=a.i(67561),s=a.i(5241),t=a.i(56129),u=a.i(16211),v=a.i(3145),w=a.i(8264),x=a.i(33980);let y=(0,h.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var z=a.i(83231);let A=(0,h.default)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),B=a=>fetch(a).then(a=>a.json());function C({appName:a,label:c="Status",compact:d=!1}){let{data:e,error:f,isLoading:g}=(0,u.default)(a?`/api/manifest/argo-status?appName=${a}`:null,B,{refreshInterval:5e3,dedupingInterval:2e3});if(g)return(0,b.jsxs)("div",{className:`flex items-center gap-2 text-neutral-400 ${d?"text-[10px]":"text-xs"}`,children:[(0,b.jsx)(k.Loader2,{size:d?10:12,className:"animate-spin"}),(0,b.jsx)("span",{children:"Loading..."})]});if(f||e?.error)return(0,b.jsxs)("div",{className:`flex items-center gap-1.5 text-neutral-400 ${d?"text-[10px]":"text-xs"}`,title:"Failed to connect to ArgoCD",children:[(0,b.jsx)(A,{size:d?10:12}),(0,b.jsx)("span",{children:"Unknown"})]});let{health:h,sync:i,operation:j}=e;if(e?.status==="NotFound"||"MissingConfig"===h)return(0,b.jsxs)("div",{className:`flex items-center gap-1.5 text-amber-500 bg-amber-50 dark:bg-amber-900/10 px-2 py-0.5 rounded-full ${d?"text-[9px]":"text-[10px]"} font-bold uppercase tracking-wider`,children:[(0,b.jsx)(z.Clock,{size:d?10:12}),(0,b.jsx)("span",{children:"Pending"})]});let l="Healthy"===h,m="Synced"===i,n="Progressing"===h||"Running"===j,o="Degraded"===h,p="bg-neutral-100 text-neutral-500 border-neutral-200",q=(0,b.jsx)(v.Activity,{size:d?10:12}),r=h;return l&&m?(p="bg-green-50 text-green-600 border-green-200 dark:bg-green-900/20 dark:border-green-900 dark:text-green-400",q=(0,b.jsx)(y,{size:d?10:12})):n?(p="bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900/20 dark:border-blue-900 dark:text-blue-400",q=(0,b.jsx)(w.RefreshCw,{size:d?10:12,className:"animate-spin"}),r="Syncing"):o?(p="bg-red-50 text-red-600 border-red-200 dark:bg-red-900/20 dark:border-red-900 dark:text-red-400",q=(0,b.jsx)(x.AlertCircle,{size:d?10:12})):m||(p="bg-yellow-50 text-yellow-600 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-900 dark:text-yellow-400",q=(0,b.jsx)(v.Activity,{size:d?10:12}),r="Out of Sync"),(0,b.jsxs)("div",{className:`flex items-center gap-1.5 px-2 py-0.5 rounded-full border ${p} ${d?"text-[9px]":"text-[10px]"} font-bold uppercase tracking-wider transition-colors`,children:[q,(0,b.jsx)("span",{children:r})]})}var D=a.i(6348),E=a.i(25249),F=a.i(69818);let G=(0,h.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);function H({appName:a,onClose:d,onSuccess:e}){let[f,g]=(0,c.useState)(!0),[h,j]=(0,c.useState)(!1),[l,m]=(0,c.useState)({text:"",type:""}),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!1),[s,t]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{try{let b=await fetch(`/api/manifest/secrets?appName=${a}`);if(!b.ok)throw Error("Failed to fetch secrets");let c=await b.json();o(c.appSecrets||[])}catch(a){m({text:a.message,type:"error"})}finally{g(!1)}})()},[a]);let u=async b=>{b.preventDefault(),j(!0),m({text:"",type:""});try{let b=await fetch("/api/manifest/secrets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appName:a,appSecrets:n})}),c=await b.json();if(b.ok)e(c.message);else throw Error(c.error||"Failed to update secrets")}catch(a){m({text:a.message,type:"error"}),j(!1)}};return f?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-neutral-400",children:[(0,b.jsx)(k.Loader2,{size:24,className:"animate-spin mb-2"}),(0,b.jsx)("p",{className:"text-xs",children:"Loading..."})]}):(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-start gap-3 p-3 bg-neutral-50 dark:bg-neutral-900 rounded-md border border-neutral-100 dark:border-neutral-800",children:[(0,b.jsx)(r.AlertTriangle,{className:"text-amber-500 shrink-0 mt-0.5",size:16}),(0,b.jsxs)("div",{className:"text-xs text-neutral-500",children:[(0,b.jsx)("span",{className:"font-semibold text-neutral-700 dark:text-neutral-300",children:"Secure Write-Only Mode:"})," Existing values are encrypted and cannot be displayed. Entering a new value will overwrite the existing one. Empty fields will be ignored."]})]}),l.text&&(0,b.jsxs)("div",{className:`mb-6 p-3 rounded-md border text-sm flex items-center gap-2 ${"success"===l.type?"bg-green-50 border-green-200 text-green-700 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-red-50 border-red-200 text-red-700 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400"}`,children:["success"===l.type?(0,b.jsx)(D.CheckCircle,{size:14}):(0,b.jsx)(x.AlertCircle,{size:14}),(0,b.jsx)("span",{children:l.text})]}),(0,b.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:"Environment Variables"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"file",accept:".env",className:"hidden",id:"edit-app-env",onChange:a=>{var b;let c;return a.target.files.length&&(b=a.target.files[0],void((c=new FileReader).onload=a=>{let c,d,e=(c=a.target.result.split("\n"),d=[],c.forEach(a=>{let b=a.trim();if(!b||b.startsWith("#"))return;let c=b.match(/^([^=]+)=(.*)$/);if(c){let a=c[1].trim(),b=c[2].trim();(b.startsWith("'")&&b.endsWith("'")||b.startsWith('"')&&b.endsWith('"'))&&(b=b.slice(1,-1)),d.push({key:a,value:b})}}),d).map(a=>({key:a.key,valueProd:a.value}));o(a=>{let b=[...a];return e.forEach(a=>{let c=b.findIndex(b=>b.key===a.key);c>=0?b[c]=a:b.push(a)}),b}),t(b.name)},c.readAsText(b)))}}),(0,b.jsxs)("label",{htmlFor:"edit-app-env",className:"cursor-pointer flex items-center gap-2 text-xs font-medium text-neutral-600 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-white bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-700 px-3 py-1.5 rounded transition-all",children:[(0,b.jsx)(E.Upload,{size:12}),s?(0,b.jsxs)("span",{children:["Loaded: ",s]}):(0,b.jsx)("span",{children:"Import .env"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[n.map((a,c)=>(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 items-start md:items-center p-3 rounded-md bg-white dark:bg-neutral-900 border border-neutral-100 dark:border-neutral-800 hover:border-neutral-200 dark:hover:border-neutral-700 transition-colors",children:[(0,b.jsxs)("div",{className:"w-full md:w-1/3 flex items-center gap-2",children:[(0,b.jsx)(G,{size:14,className:"text-neutral-300 shrink-0"}),(0,b.jsx)("input",{placeholder:"KEY_NAME",className:"w-full bg-transparent text-xs font-mono font-medium text-neutral-700 dark:text-neutral-300 outline-none",value:a.key,readOnly:!0,title:"Key cannot be changed"})]}),(0,b.jsxs)("div",{className:"w-full md:w-2/3 flex flex-col md:flex-row gap-2",children:[(0,b.jsx)("input",{placeholder:"Value (Will be encrypted)",className:"flex-1 p-2 text-xs border border-neutral-200 dark:border-neutral-800 rounded bg-neutral-50 dark:bg-neutral-950 focus:ring-1 focus:ring-neutral-900 dark:focus:ring-white outline-none transition-all placeholder-neutral-400",value:a.valueProd,onChange:a=>{var b;let d;return b=a.target.value,void((d=[...n])[c].valueProd=b,o(d))},autoComplete:"off"}),(0,b.jsx)("button",{type:"button",onClick:()=>o(a=>a.filter((a,b)=>b!==c)),className:"p-2 text-neutral-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded transition-colors",children:(0,b.jsx)(i,{size:14})})]})]},c)),0===n.length&&(0,b.jsx)("div",{className:"text-center py-8 text-neutral-400 text-xs italic border border-dashed border-neutral-200 dark:border-neutral-800 rounded-md",children:"No secrets defined."}),(0,b.jsxs)("button",{type:"button",onClick:()=>o([...n,{key:"NEW_KEY",valueProd:""}]),className:"w-full py-2 flex items-center justify-center gap-2 text-xs font-medium text-neutral-500 hover:text-neutral-900 dark:hover:text-white border border-dashed border-neutral-200 dark:border-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-600 rounded-md transition-all",children:[(0,b.jsx)(F.Plus,{size:14})," Add Secret"]})]})]}),(0,b.jsx)("div",{className:"pt-4 border-t border-neutral-100 dark:border-neutral-800",children:(0,b.jsx)("button",{type:"submit",disabled:h,className:"w-full md:w-auto flex items-center justify-center gap-2 bg-neutral-900 hover:bg-neutral-800 dark:bg-white dark:text-neutral-900 dark:hover:bg-neutral-200 text-white font-medium py-2 px-6 rounded-md transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm ml-auto",children:h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Loader2,{size:14,className:"animate-spin"}),"Encrypting & Saving..."]}):(0,b.jsx)(b.Fragment,{children:"Save Secrets"})})})]})]})}function I({appName:a,onClose:d,onSuccess:e}){let[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(!1),[j,l]=(0,c.useState)({text:"",type:""}),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(!1),[q,s]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{try{let b=await fetch(`/api/manifest/secrets?appName=${a}`);if(!b.ok)throw Error("Failed to fetch secrets");let c=await b.json();n(c.dbSecrets||[])}catch(a){l({text:a.message,type:"error"})}finally{g(!1)}})()},[a]);let t=async b=>{b.preventDefault(),i(!0),l({text:"",type:""});try{let b=await fetch("/api/manifest/secrets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appName:a,dbSecrets:m})}),c=await b.json();if(b.ok)e(c.message);else throw Error(c.error||"Failed to update secrets")}catch(a){l({text:a.message,type:"error"}),i(!1)}};return f?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-neutral-400",children:[(0,b.jsx)(k.Loader2,{size:24,className:"animate-spin mb-2"}),(0,b.jsx)("p",{className:"text-xs",children:"Loading..."})]}):(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-start gap-3 p-3 bg-neutral-50 dark:bg-neutral-900 rounded-md border border-neutral-100 dark:border-neutral-800",children:[(0,b.jsx)(r.AlertTriangle,{className:"text-amber-500 shrink-0 mt-0.5",size:16}),(0,b.jsxs)("div",{className:"text-xs text-neutral-500",children:[(0,b.jsx)("span",{className:"font-semibold text-neutral-700 dark:text-neutral-300",children:"Secure Write-Only Mode:"})," Existing values are encrypted and cannot be displayed. Entering a new value will overwrite the existing one. Empty fields will be ignored."]})]}),j.text&&(0,b.jsxs)("div",{className:`mb-6 p-3 rounded-md border text-sm flex items-center gap-2 ${"success"===j.type?"bg-green-50 border-green-200 text-green-700 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-red-50 border-red-200 text-red-700 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400"}`,children:["success"===j.type?(0,b.jsx)(D.CheckCircle,{size:14}):(0,b.jsx)(x.AlertCircle,{size:14}),(0,b.jsx)("span",{children:j.text})]}),(0,b.jsxs)("form",{onSubmit:t,className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:"Database Credentials"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"file",accept:".env",className:"hidden",id:"edit-db-env",onChange:a=>{var b;let c;return a.target.files.length&&(b=a.target.files[0],void((c=new FileReader).onload=a=>{let c,d,e=(c=a.target.result.split("\n"),d=[],c.forEach(a=>{let b=a.trim();if(!b||b.startsWith("#"))return;let c=b.match(/^([^=]+)=(.*)$/);if(c){let a=c[1].trim(),b=c[2].trim();(b.startsWith("'")&&b.endsWith("'")||b.startsWith('"')&&b.endsWith('"'))&&(b=b.slice(1,-1)),d.push({key:a,value:b})}}),d).map(a=>({key:a.key,valueProd:a.value}));n(a=>{let b=[...a];return e.forEach(a=>{let c=b.findIndex(b=>b.key===a.key);c>=0?b[c]=a:b.push(a)}),b}),s(b.name)},c.readAsText(b)))}}),(0,b.jsxs)("label",{htmlFor:"edit-db-env",className:"cursor-pointer flex items-center gap-2 text-xs font-medium text-neutral-600 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-white bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 hover:border-neutral-300 dark:hover:border-neutral-700 px-3 py-1.5 rounded transition-all",children:[(0,b.jsx)(E.Upload,{size:12}),q?(0,b.jsxs)("span",{children:["Loaded: ",q]}):(0,b.jsx)("span",{children:"Import .env"})]})]})]}),(0,b.jsx)("div",{className:"space-y-2",children:m.map((a,c)=>(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 items-start md:items-center p-3 rounded-md bg-white dark:bg-neutral-900 border border-neutral-100 dark:border-neutral-800 hover:border-neutral-200 dark:hover:border-neutral-700 transition-colors",children:[(0,b.jsxs)("div",{className:"w-full md:w-1/3 flex items-center gap-2",children:[(0,b.jsx)(G,{size:14,className:"text-neutral-300 shrink-0"}),(0,b.jsx)("input",{placeholder:"KEY",className:"w-full bg-transparent text-xs font-mono font-medium text-neutral-700 dark:text-neutral-300 outline-none",value:a.key,readOnly:!0,autoComplete:"off"})]}),(0,b.jsx)("div",{className:"w-full md:w-2/3 flex flex-col md:flex-row gap-2",children:(0,b.jsx)("input",{placeholder:"Value (Will be encrypted)",className:"flex-1 p-2 text-xs border border-neutral-200 dark:border-neutral-800 rounded bg-neutral-50 dark:bg-neutral-950 focus:ring-1 focus:ring-neutral-900 dark:focus:ring-white outline-none transition-all placeholder-neutral-400",value:a.valueProd,onChange:a=>{var b;let d;return b=a.target.value,void((d=[...m])[c].valueProd=b,n(d))},autoComplete:"off"})})]},c))})]}),(0,b.jsx)("div",{className:"pt-4 border-t border-neutral-100 dark:border-neutral-800",children:(0,b.jsx)("button",{type:"submit",disabled:h,className:"w-full md:w-auto flex items-center justify-center gap-2 bg-neutral-900 hover:bg-neutral-800 dark:bg-white dark:text-neutral-900 dark:hover:bg-neutral-200 text-white font-medium py-2 px-6 rounded-md transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm ml-auto",children:h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Loader2,{size:14,className:"animate-spin"}),"Encrypting & Saving..."]}):(0,b.jsx)(b.Fragment,{children:"Save Database Secrets"})})})]})]})}function J({appName:a,onClose:d,onSuccess:e}){let[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(!1),[l,m]=(0,c.useState)({text:"",type:""}),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{try{let b=await fetch(`/api/manifest/ingress?appName=${a}`);if(!b.ok)throw Error("Failed to fetch ingress config");let c=await b.json();o(c.enabled),q(c.host||""),s(c.tls)}catch(a){m({text:a.message,type:"error"})}finally{h(!1)}})()},[a]);let t=async b=>{b.preventDefault(),j(!0),m({text:"",type:""});try{let b=await fetch("/api/manifest/ingress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appName:a,enabled:n,host:p,tls:r})}),c=await b.json();if(b.ok)e(c.message);else throw Error(c.error||"Failed to update ingress")}catch(a){m({text:a.message,type:"error"}),j(!1)}};return g?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-neutral-400",children:[(0,b.jsx)(k.Loader2,{size:24,className:"animate-spin mb-2"}),(0,b.jsx)("p",{className:"text-xs",children:"Loading..."})]}):(0,b.jsxs)("div",{className:"w-full",children:[l.text&&(0,b.jsxs)("div",{className:`mb-6 p-3 rounded-md border text-sm flex items-center gap-2 ${"success"===l.type?"bg-green-50 border-green-200 text-green-700 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-red-50 border-red-200 text-red-700 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400"}`,children:["success"===l.type?(0,b.jsx)(D.CheckCircle,{size:14}):(0,b.jsx)(x.AlertCircle,{size:14}),(0,b.jsx)("span",{children:l.text})]}),(0,b.jsxs)("form",{onSubmit:t,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between border-b border-neutral-100 dark:border-neutral-800 pb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:"Public Access"}),(0,b.jsx)("p",{className:"text-xs text-neutral-500 mt-0.5",children:"Enable Ingress to expose this application to the internet."})]}),(0,b.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:n,onChange:a=>o(a.target.checked)}),(0,b.jsx)("div",{className:"w-9 h-5 bg-neutral-200 peer-focus:outline-none rounded-full peer dark:bg-neutral-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-neutral-600 peer-checked:bg-neutral-900 dark:peer-checked:bg-white"})]})]}),(0,b.jsxs)("div",{className:`transition-all duration-300 ${n?"opacity-100":"opacity-50 pointer-events-none"}`,children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-neutral-700 dark:text-neutral-300 mb-1.5",children:"Hostname"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-neutral-400",children:(0,b.jsx)(f.Globe,{size:14})}),(0,b.jsx)("input",{required:n,disabled:!n,className:"w-full pl-9 pr-3 py-2 text-sm border border-neutral-200 dark:border-neutral-800 rounded-md bg-white dark:bg-neutral-900 focus:ring-1 focus:ring-neutral-900 dark:focus:ring-white outline-none transition-all placeholder-neutral-400",placeholder:"e.g. app.naratel.id",value:p,onChange:a=>q(a.target.value)})]}),(0,b.jsxs)("p",{className:"text-[10px] text-neutral-400 mt-1.5",children:["Testing env will automatically use ",(0,b.jsxs)("code",{children:["test-",p||"..."]})]})]}),(0,b.jsxs)("div",{className:`flex items-center gap-2 ${n?"opacity-100":"opacity-50 pointer-events-none"}`,children:[(0,b.jsx)("input",{type:"checkbox",id:"tls-check",checked:r,disabled:!n,onChange:a=>s(a.target.checked),className:"rounded border-neutral-300 text-neutral-900 focus:ring-neutral-900 dark:bg-neutral-800 dark:border-neutral-700"}),(0,b.jsx)("label",{htmlFor:"tls-check",className:"text-sm text-neutral-600 dark:text-neutral-400 select-none cursor-pointer",children:"Enable HTTPS / TLS (Auto-Certificate)"})]})]}),(0,b.jsx)("div",{className:"pt-4",children:(0,b.jsx)("button",{type:"submit",disabled:i,className:"w-full md:w-auto flex items-center justify-center gap-2 bg-neutral-900 hover:bg-neutral-800 dark:bg-white dark:text-neutral-900 dark:hover:bg-neutral-200 text-white font-medium py-2 px-6 rounded-md transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Loader2,{size:14,className:"animate-spin"}),"Saving..."]}):(0,b.jsx)(b.Fragment,{children:"Save Changes"})})})]})]})}var K=a.i(39925),L=a.i(18303);function M(a,b={}){let{data:c,error:d,isLoading:e}=(0,u.default)(a?`/api/manifest/argo-status?appName=${a}`:null,L.fetcher,{revalidateOnFocus:!1,dedupingInterval:1e4,refreshInterval:3e4*!!b.autoRefresh,keepPreviousData:!0,...b});return{health:c?.health,status:c?.status,isLoading:e,isError:d,exists:c?.health&&c?.health!=="MissingConfig"&&c?.status!=="NotFound"}}function N({title:a,type:h,env:i,argoAppName:j,internalDns:k,domain:o,nodePort:p}){let[r,s]=(0,c.useState)(!1);return(0,b.jsx)("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-lg p-4 transition-all hover:border-neutral-300 dark:hover:border-neutral-700 h-full flex flex-col justify-between group/card",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"text-neutral-400 dark:text-neutral-500",children:"db"===h?(0,b.jsx)(e.Database,{size:18}):(0,b.jsx)(d.Server,{size:18})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:a}),(0,b.jsx)("p",{className:"text-xs text-neutral-500",children:i})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("a",{href:`${process.env.NEXT_PUBLIC_ARGOCD_URL||"http://117.103.71.154:32081"}/applications/cicd/${j}`,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 text-neutral-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"View ArgoCD Tree",children:(0,b.jsx)(q,{size:14})}),(0,b.jsx)(C,{appName:j,compact:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[k&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-medium text-neutral-400 mb-1.5 uppercase tracking-wide",children:"Internal DNS"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-neutral-50 dark:bg-neutral-950 px-2 py-1.5 rounded border border-neutral-200 dark:border-neutral-800 group",children:[(0,b.jsx)("code",{className:"text-xs font-mono text-neutral-600 dark:text-neutral-400 truncate flex-1",children:k}),(0,b.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(k),s(!0),setTimeout(()=>s(!1),2e3)},className:"text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors opacity-0 group-hover:opacity-100",children:r?(0,b.jsx)(m.Check,{size:12}):(0,b.jsx)(l.Copy,{size:12})})]})]}),o&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-medium text-neutral-400 mb-1.5 uppercase tracking-wide",children:"External Access"}),(0,b.jsxs)("a",{href:`http://${o}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-xs font-medium text-blue-600 dark:text-blue-400 hover:underline bg-blue-50 dark:bg-blue-900/20 px-2 py-1.5 rounded border border-blue-100 dark:border-blue-800/50 transition-colors",children:[(0,b.jsx)(f.Globe,{size:12}),(0,b.jsx)("span",{className:"truncate flex-1",children:o}),(0,b.jsx)(n,{size:10})]})]}),p&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-medium text-neutral-400 mb-1.5 uppercase tracking-wide",children:"Service Type"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-neutral-50 dark:bg-neutral-950 px-2 py-1.5 rounded border border-neutral-200 dark:border-neutral-800",children:[(0,b.jsx)(g.Network,{size:12,className:"text-neutral-400"}),(0,b.jsx)("span",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono",children:"NodePort"})]})]})]})]})})}function O({params:a}){let d=(0,s.useRouter)(),e=(0,c.use)(a).appName,f=decodeURIComponent(e),{app:g,isLoading:h,mutate:l}=(0,K.useApp)(e),{exists:m}=M(`${f}-testing`),{exists:q,isLoading:u}=M(`${f}-prod`),v=g||(q?{id:"Unknown",name:f,image:"Unknown (External)",db:"unknown",liveIngressProd:null,createdAt:new Date().toISOString()}:null),w=h||u&&!g,[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)("ingress");(0,c.useEffect)(()=>{g||!q||h||u||y({text:"App found in ArgoCD but missing from local registry.",type:"warning"})},[g,q,h,u]);let L=async()=>{if(B===v.name){E(!0);try{if((await fetch("/api/manifest/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appId:v.id,appName:v.name})})).ok)l(),d.push("/manifest?message=App deleted successfully");else throw Error("Delete failed")}catch(a){alert(a.message),E(!1),A(!1)}}},O=a=>{alert(a)};return w?(0,b.jsx)(t.default,{children:(0,b.jsxs)("div",{className:"h-[50vh] flex flex-col items-center justify-center text-neutral-500 gap-2",children:[(0,b.jsx)(k.Loader2,{size:32,className:"animate-spin text-[#FFA500]"}),(0,b.jsx)("p",{children:"Loading application details..."})]})}):v?(0,b.jsx)(t.default,{children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 pb-20",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 border-b border-neutral-200 dark:border-neutral-800 pb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>d.back(),className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-full transition-colors text-neutral-500",children:(0,b.jsx)(j.ChevronLeft,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-neutral-900 dark:text-white tracking-tight",children:v.name}),(0,b.jsx)("span",{className:"text-[10px] font-mono text-neutral-400 bg-neutral-100 dark:bg-neutral-800 px-2 py-0.5 rounded",children:v.id})]}),(0,b.jsx)("p",{className:"text-sm text-neutral-500 mt-1 font-mono",children:v.image})]})]}),(0,b.jsxs)("button",{onClick:()=>{C(""),A(!0)},className:"text-sm text-red-600 hover:text-red-700 font-medium px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-md transition-colors flex items-center gap-2",children:[(0,b.jsx)(i,{size:16}),"Delete Application"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 px-1",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wide mb-2",children:"Public Access"}),v.liveIngressProd?(0,b.jsxs)("a",{href:`http://${v.liveIngressProd}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-neutral-900 dark:text-white hover:underline flex items-center gap-1.5",children:[v.liveIngressProd,(0,b.jsx)(n,{size:12,className:"text-neutral-400"})]}):(0,b.jsx)("p",{className:"text-sm text-neutral-400 italic",children:"Not configured"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wide mb-2",children:"Database"}),(0,b.jsx)("p",{className:"text-sm font-medium text-neutral-900 dark:text-white capitalize",children:"none"===v.db?"None":v.db})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xs font-medium text-neutral-500 uppercase tracking-wide mb-2",children:"Created At"}),(0,b.jsx)("p",{className:"text-sm font-mono text-neutral-900 dark:text-white",children:new Date(v.createdAt||Date.now()).toLocaleDateString()})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-6",children:"Environment Topology"}),(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xs font-bold text-neutral-400 uppercase tracking-wider mb-3 ml-1",children:"Production Environment"}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-4",children:[(0,b.jsx)("div",{className:"flex-1 min-w-0",children:(0,b.jsx)(N,{title:"Application",type:"app",env:"PRODUCTION",argoAppName:`${v.name}-prod`,domain:v.liveIngressProd})}),"none"!==v.db&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-center text-neutral-300 dark:text-neutral-700",children:[(0,b.jsx)(o.ArrowRight,{size:24,strokeWidth:1.5,className:"hidden md:block"}),(0,b.jsx)(p,{size:24,strokeWidth:1.5,className:"md:hidden"})]}),(0,b.jsx)("div",{className:"flex-1 min-w-0",children:(0,b.jsx)(N,{title:"Database",type:"db",env:"PRODUCTION",argoAppName:`${v.name}-db-prod`,internalDns:`svc-${v.name}-db-${v.id}`})})]})]})]}),m&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xs font-bold text-neutral-400 uppercase tracking-wider mb-3 ml-1",children:"Testing Environment (Ephemeral)"}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-4 animate-in fade-in slide-in-from-top-2",children:[(0,b.jsx)("div",{className:"flex-1 min-w-0",children:(0,b.jsx)(N,{title:"Application",type:"app",env:"TESTING",argoAppName:`${v.name}-testing`,nodePort:!0})}),"none"!==v.db&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-center text-neutral-300 dark:text-neutral-700",children:[(0,b.jsx)(o.ArrowRight,{size:24,strokeWidth:1.5,className:"hidden md:block"}),(0,b.jsx)(p,{size:24,strokeWidth:1.5,className:"md:hidden"})]}),(0,b.jsx)("div",{className:"flex-1 min-w-0",children:(0,b.jsx)(N,{title:"Database",type:"db",env:"TESTING",argoAppName:`${v.name}-db-testing`,internalDns:`svc-${v.name}-db-${v.id}.${v.id}-${v.name}-db-testing.svc.cluster.local`})})]})]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex gap-6 border-b border-neutral-200 dark:border-neutral-800 mb-6",children:[(0,b.jsx)("button",{onClick:()=>G("ingress"),className:`pb-3 text-sm font-medium transition-all ${"ingress"===F?"text-neutral-900 dark:text-white border-b-2 border-neutral-900 dark:border-white":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:"Ingress"}),(0,b.jsx)("button",{onClick:()=>G("app-secrets"),className:`pb-3 text-sm font-medium transition-all ${"app-secrets"===F?"text-neutral-900 dark:text-white border-b-2 border-neutral-900 dark:border-white":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:"App Secrets"}),"none"!==v.db&&(0,b.jsx)("button",{onClick:()=>G("db-secrets"),className:`pb-3 text-sm font-medium transition-all ${"db-secrets"===F?"text-neutral-900 dark:text-white border-b-2 border-neutral-900 dark:border-white":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:"DB Secrets"})]}),(0,b.jsxs)("div",{className:"bg-neutral-50 dark:bg-neutral-900/50 rounded-xl border border-neutral-200 dark:border-neutral-800 p-6 min-h-[400px]",children:["ingress"===F&&(0,b.jsx)(J,{appName:v.name,onClose:()=>{},onSuccess:O}),"app-secrets"===F&&(0,b.jsx)(H,{appName:v.name,onClose:()=>{},onSuccess:O}),"db-secrets"===F&&"none"!==v.db&&(0,b.jsx)(I,{appName:v.name,onClose:()=>{},onSuccess:O})]})]}),z&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-neutral-900 w-full max-w-md rounded-xl shadow-2xl p-6 border border-neutral-200 dark:border-neutral-800",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center text-center mb-6",children:[(0,b.jsx)("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-full text-red-500 mb-4",children:(0,b.jsx)(r.AlertTriangle,{size:24})}),(0,b.jsx)("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:"Delete Application?"}),(0,b.jsx)("p",{className:"text-sm text-neutral-500 mt-2",children:"This action cannot be undone. All deployments and secrets will be permanently removed."})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("label",{className:"block text-xs font-bold text-neutral-500 uppercase",children:["Type ",(0,b.jsx)("span",{className:"text-neutral-900 dark:text-white select-all",children:v.name})," to confirm:"]}),(0,b.jsx)("input",{type:"text",className:"w-full p-2 text-sm border border-neutral-300 dark:border-neutral-700 rounded-lg dark:bg-neutral-950 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none",placeholder:v.name,value:B,onChange:a=>C(a.target.value)})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)("button",{onClick:()=>A(!1),disabled:D,className:"flex-1 py-2.5 text-sm font-bold text-neutral-600 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-800 rounded-lg transition-colors",children:"Cancel"}),(0,b.jsxs)("button",{onClick:L,disabled:B!==v.name||D,className:"flex-1 py-2.5 text-sm font-bold text-white bg-red-600 hover:bg-red-700 rounded-lg shadow-lg shadow-red-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[D&&(0,b.jsx)(k.Loader2,{size:16,className:"animate-spin"}),"Delete"]})]})]})})]})}):(0,b.jsx)(t.default,{children:(0,b.jsxs)("div",{className:"p-8 text-center",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Application Not Found"}),(0,b.jsx)("p",{className:"text-sm text-neutral-500 mb-6 max-w-xs mx-auto",children:x?.text}),(0,b.jsx)("button",{onClick:()=>d.back(),className:"text-[#FFA500] hover:underline",children:"Go Back"})]})})}a.s(["default",()=>O],49994)}];

//# sourceMappingURL=webui-devops_Naratel-Devops-Dashboard_src_app_manifest_%5BappName%5D_page_d5ae5b70.js.map