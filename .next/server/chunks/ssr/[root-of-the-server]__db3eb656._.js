module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},45482,(a,b,c)=>{"use strict";b.exports=a.r(78375).vendored.contexts.AppRouterContext},87151,(a,b,c)=>{"use strict";b.exports=a.r(78375).vendored.contexts.HooksClientContext},66947,(a,b,c)=>{"use strict";b.exports=a.r(78375).vendored.contexts.ServerInsertedHtml},4961,(a,b,c)=>{"use strict";b.exports=a.r(78375).vendored["react-ssr"].ReactDOM},94523,(a,b,c)=>{"use strict";b.exports=a.r(78375).vendored["react-ssr"].ReactServerDOMTurbopackClient},62383,a=>{a.v("/_next/static/media/Logo.39b5e2fb.png")},40168,a=>{"use strict";let b=(0,a.i(94686).default)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);a.s(["GitBranch",()=>b],40168)},36048,a=>{"use strict";let b=(0,a.i(94686).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],36048)},6348,a=>{"use strict";let b=(0,a.i(94686).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],6348)},83231,a=>{"use strict";let b=(0,a.i(94686).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],83231)},67561,8264,a=>{"use strict";var b=a.i(94686);let c=(0,b.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>c],67561);let d=(0,b.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>d],8264)},62312,a=>{"use strict";let b=(0,a.i(94686).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],62312)},76002,a=>{"use strict";var b=a.i(79939),c=a.i(56129),d=a.i(5491),e=a.i(6348),f=a.i(94686);let g=(0,f.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var h=a.i(36048),i=a.i(83231),j=a.i(67561);let k=(0,f.default)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),l=(0,f.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var m=a.i(40168),n=a.i(8264),o=a.i(62312);let p=a=>{if(!a)return null;let b=a.match(/(\d+)\.(\d+)\.(\d+)/);return b?{full:b[0],major:parseInt(b[1],10),minor:parseInt(b[2],10),patch:parseInt(b[3],10)}:null};function q(){let[a,c]=(0,d.useState)([]),[f,q]=(0,d.useState)(!0),[r,s]=(0,d.useState)(!1),[t,u]=(0,d.useState)(null),[v,w]=(0,d.useState)({text:"",type:""}),[x,y]=(0,d.useState)(!1),z=(0,d.useRef)(0),A=(0,d.useCallback)(async(a=!1)=>{let b=++z.current;a&&s(!0);try{let a=await fetch("/api/jenkins/pending",{cache:"no-store",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(8e3)});if(b!==z.current)return;if(!a.ok)throw Error("API_ERROR");let d=await a.json(),e=Array.isArray(d)?d:d.data||[];c(e),y(!1)}catch(a){console.error("Fetch Error:",a),b===z.current&&y(!0)}finally{b===z.current&&(q(!1),s(!1))}},[]);(0,d.useEffect)(()=>{A();let a=setInterval(()=>A(!0),1e4);return()=>clearInterval(a)},[A]);let B=(0,d.useMemo)(()=>{if(!a.length)return{groups:{},names:[]};let b=a.reduce((a,b)=>{let c=b.jobName;return a[c]||(a[c]=[]),a[c].push(b),a},{});Object.keys(b).forEach(a=>{b[a].sort((a,b)=>{let c=p(a.name),d=p(b.name);return c||d?c?d?c.major!==d.major?d.major-c.major:c.minor!==d.minor?d.minor-c.minor:d.patch-c.patch:-1:1:b.timestamp-a.timestamp})});let c=Object.keys(b).sort();return{groups:b,sortedNames:c}},[a]),C=async(a,b,c)=>{u(`${a}-${c}`),w({text:"",type:""});try{let d=await fetch("/api/jenkins/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buildId:a,jobName:b,action:c})}),e=await d.json();if(e.success)w({text:e.message||"Action processed successfully",type:"success"}),setTimeout(()=>A(!0),1e3);else throw Error(e.message||"Failed to execute action")}catch(a){w({text:a.message,type:"error"})}finally{u(null)}};return(0,b.jsxs)("div",{className:"w-full",children:[v.text&&(0,b.jsxs)("div",{className:`mb-6 p-4 rounded-lg border flex items-center gap-3 text-sm animate-in fade-in slide-in-from-top-2 ${"success"===v.type?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-700 dark:text-red-300"}`,children:["success"===v.type?(0,b.jsx)(e.CheckCircle,{size:18}):(0,b.jsx)(j.AlertTriangle,{size:18}),(0,b.jsx)("span",{className:"font-medium",children:v.text}),(0,b.jsx)("button",{onClick:()=>w({text:"",type:""}),className:"ml-auto hover:opacity-70",children:(0,b.jsx)(g,{size:16})})]}),f?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-neutral-500",children:[(0,b.jsx)(h.Loader2,{size:48,className:"animate-spin text-[#FFA500] mb-4"}),(0,b.jsx)("p",{children:"Syncing with Jenkins..."})]}):x?(0,b.jsxs)("div",{className:"col-span-full py-20 text-center flex flex-col items-center justify-center text-neutral-500 border-2 border-dashed border-red-200 dark:border-red-800/50 rounded-2xl bg-red-50/50 dark:bg-red-900/10",children:[(0,b.jsx)(k,{size:48,className:"text-red-300 mb-4"}),(0,b.jsx)("h3",{className:"font-semibold text-lg text-red-600 dark:text-red-400",children:"Connection Failure"}),(0,b.jsx)("p",{className:"text-sm max-w-sm mt-2",children:"Failed to fetch data from Jenkins API endpoint. Ensure VPN or tunnel is active."}),(0,b.jsxs)("button",{onClick:()=>A(),className:"mt-6 flex items-center gap-2 bg-neutral-900 hover:bg-neutral-800 text-white dark:bg-white dark:text-neutral-900 font-bold py-2 px-6 rounded-lg transition-all",children:[(0,b.jsx)(n.RefreshCw,{size:18})," Retry Connection"]})]}):0===a.length?(0,b.jsxs)("div",{className:"col-span-full py-20 text-center flex flex-col items-center justify-center text-neutral-500 border-2 border-dashed border-neutral-200 dark:border-neutral-800 rounded-2xl bg-white/50 dark:bg-neutral-900/50",children:[(0,b.jsx)(e.CheckCircle,{size:48,className:"text-neutral-300 mb-4"}),(0,b.jsx)("p",{className:"font-semibold text-lg",children:"All caught up!"}),(0,b.jsx)("p",{className:"text-sm max-w-sm mt-2",children:"No pipelines are currently waiting for approval."})]}):(0,b.jsx)("div",{className:"flex flex-col gap-8",children:B.sortedNames.map(a=>(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 px-1",children:[(0,b.jsx)("div",{className:"p-1.5 bg-neutral-100 dark:bg-neutral-800 rounded-md",children:(0,b.jsx)(l,{size:16,className:"text-[#FFA500]"})}),(0,b.jsx)("h2",{className:"text-lg font-bold text-neutral-900 dark:text-white tracking-tight",children:a}),(0,b.jsxs)("span",{className:"bg-neutral-100 dark:bg-neutral-800 text-neutral-500 dark:text-neutral-400 text-xs font-mono font-bold px-2 py-0.5 rounded-full border border-neutral-200 dark:border-neutral-700",children:[B.groups[a].length," PENDING"]}),(0,b.jsx)("div",{className:"h-px flex-1 bg-neutral-200 dark:bg-neutral-800 ml-2"})]}),(0,b.jsx)("div",{className:"grid gap-4",children:B.groups[a].map(a=>{let c=p(a.name);t&&t.startsWith(a.id);let d=a.tag?a.tag.startsWith("v")?a.tag:`v${a.tag}`:c?`v${c.full}`:a.name;return(0,b.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-xl border border-neutral-200 dark:border-neutral-800 shadow-sm hover:shadow-md transition-all group overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-6 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsxs)("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 text-[10px] font-mono font-bold px-2 py-0.5 rounded-full border border-amber-200 dark:border-amber-700 flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse"})," WAITING INPUT"]}),(0,b.jsxs)("span",{className:"bg-neutral-100 dark:bg-neutral-800 text-neutral-500 dark:text-neutral-400 text-[10px] font-mono font-bold px-2 py-0.5 rounded-full border border-neutral-200 dark:border-neutral-700",children:["ID: ",a.id]}),a.tag&&(0,b.jsxs)("span",{className:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-[10px] font-mono font-bold px-2 py-0.5 rounded-full border border-blue-200 dark:border-blue-700 flex items-center gap-1",children:["TAG: ",a.tag]})]}),(0,b.jsxs)("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white flex items-center gap-2",children:[(0,b.jsx)(m.GitBranch,{className:"text-neutral-400",size:20}),d]}),(0,b.jsx)("div",{className:"flex items-center gap-4 mt-2 text-xs text-neutral-500 font-mono",children:(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(i.Clock,{size:12}),(0,b.jsx)("span",{children:new Date(a.timestamp).toLocaleString("id-ID")})]})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:()=>C(a.id,a.jobName,"approve"),disabled:!!t,className:"px-4 py-2.5 text-[11px] font-bold uppercase tracking-wider bg-neutral-900 text-white dark:bg-neutral-100 dark:text-neutral-900 rounded-lg hover:bg-green-600 dark:hover:bg-green-500 hover:text-white dark:hover:text-white transition-all shadow-sm disabled:opacity-50 flex items-center gap-2 min-w-[100px] justify-center",children:t===`${a.id}-approve`?(0,b.jsx)(h.Loader2,{size:14,className:"animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Check,{size:14})," Deploy"]})}),(0,b.jsx)("button",{onClick:()=>C(a.id,a.jobName,"abort"),disabled:!!t,className:"px-4 py-2.5 text-[11px] font-bold uppercase tracking-wider bg-white text-neutral-700 dark:bg-neutral-800 dark:text-neutral-300 border border-neutral-200 dark:border-neutral-700 rounded-lg hover:bg-red-600 hover:border-red-600 dark:hover:bg-red-500 dark:hover:border-red-500 hover:text-white dark:hover:text-white transition-all shadow-sm disabled:opacity-50 flex items-center gap-2",children:t===`${a.id}-abort`?(0,b.jsx)(h.Loader2,{size:14,className:"animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g,{size:14})," Abort"]})})]})]}),(0,b.jsx)("div",{className:"h-1 w-full bg-neutral-50 dark:bg-neutral-800/50 mt-0",children:(0,b.jsx)("div",{className:"h-full bg-amber-500/20 w-full animate-pulse"})})]},a.id)})})]},a))})]})}function r(){return(0,b.jsx)(c.default,{children:(0,b.jsx)(q,{})})}a.s(["default",()=>r],76002)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__db3eb656._.js.map